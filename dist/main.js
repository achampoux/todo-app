(()=>{"use strict";const e=document.getElementById("projects"),t=document.getElementById("tasks"),d=document.getElementById("project-title"),n=document.getElementById("task-title"),i=document.getElementById("task-description"),a=document.getElementById("task-due-date"),s=document.getElementById("task-priority"),c=document.getElementById("edit-task-title"),o=document.getElementById("edit-task-description"),r=document.getElementById("edit-task-due-date"),l=document.getElementById("edit-task-priority"),p=document.getElementById("add-project"),u=document.getElementById("add-task"),m=document.getElementById("add-project-popup"),E=document.getElementById("add-task-popup"),h=document.getElementById("edit-task-popup"),k=document.getElementById("close-project-popup"),v=document.getElementById("close-task-popup"),y=document.getElementById("close-edit-task-popup"),g=document.getElementById("button-submit-project"),L=document.getElementById("button-submit-task"),b=document.getElementById("button-edit-task");p.addEventListener("click",x),u.addEventListener("click",x),k.addEventListener("click",x),v.addEventListener("click",x),y.addEventListener("click",x),g.addEventListener("click",x),L.addEventListener("click",x),b.addEventListener("click",x);let I={Default:[{title:"Title",description:"Description",dueDate:"2024-03-03",priority:"low"},{title:"Title",description:"Description",dueDate:"2024-03-03",priority:"medium"},{title:"Title",description:"Description",dueDate:"2024-03-03",priority:"high"}],"Project-A":[{title:"Lorem Ipsum",description:"This is a description",dueDate:"2028-03-03",priority:"high"}],"Empty project":[]},B=Object.keys(I)[0],C=0;function j(e){let t;try{t=window[e];const d="__storage_test__";return t.setItem(d,d),t.removeItem(d),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}j("localStorage")&&localStorage["tasks-by-project"]&&(I=JSON.parse(localStorage["tasks-by-project"]));const P={create(){let e=d.value;return P.push(e),P.clear(),P.print(),e},push(e){I[e]=[],B=e,D.print(B)},clear(){e.innerText=""},print(){const t=document.createElement("ul");for(const e in I)if(I.hasOwnProperty(e)){const d=document.createElement("li");d.addEventListener("click",U),d.textContent=e,t.appendChild(d)}e.appendChild(t),P.store()},hidePopUp(){m.classList.add("hidden")},showPopUp(){m.classList.remove("hidden")},store(){j("localStorage")&&(localStorage["tasks-by-project"]=JSON.stringify(I))},remove(e){delete I[e],B=Object.keys(I)[0],P.clear(),D.clear(),P.print()}},D={create:(e,t,d,c)=>({title:n.value,description:i.value,dueDate:a.value,priority:s.value}),createEdit:(e,t,d,n)=>({title:c.value,description:o.value,dueDate:r.value,priority:l.value}),push(e,t){I[t=B].push(e),D.print(t)},clear(){t.innerText=""},print(e){const d=I[e];if(d){const e=document.createElement("ul"),n=document.createElement("div"),i=document.createElement("button");n.classList.add("button-remove-container"),i.classList.add("remove-project"),i.textContent="remove project",i.id=B,i.addEventListener("click",x),n.appendChild(i),d.forEach(((t,d)=>{const n=document.createElement("li"),i=document.createElement("div"),a=document.createElement("div");i.classList.add("task-container",t.priority),a.classList.add("button-container");const s=document.createElement("button"),c=document.createElement("button");s.classList.add("remove-task","close"),s.id=d,c.classList.add("edit-task","close"),c.id=d;const o=document.createElement("h2");o.classList.add("task-title");const r=document.createElement("p");r.classList.add("hidden");const l=document.createElement("span");l.classList.add("hidden"),s.addEventListener("click",x),c.addEventListener("click",x),o.addEventListener("click",x),s.textContent="x",c.textContent="edit",o.textContent=t.title,r.textContent=t.description,l.textContent=t.dueDate,a.appendChild(o),a.appendChild(c),a.appendChild(s),i.appendChild(a),i.appendChild(a),i.appendChild(r),i.appendChild(l),n.appendChild(i),e.appendChild(n)})),t.innerHTML="",t.appendChild(e),0==d.length&&t.appendChild(n),P.store()}},hidePopUp(){E.classList.add("hidden")},showPopUp(){E.classList.remove("hidden")},hideEditPopUp(){h.classList.add("hidden")},showEditPopUp(){c.value=I[B][C].title,o.value=I[B][C].description,r.value=I[B][C].dueDate,l.value=I[B][C].priority,h.classList.remove("hidden")},remove(e){I[B].splice(e,1),D.print(B)},edit(e){I[B].splice(C,1,e),D.print(B)}};function U(e){let t=e.target.innerText;B=t,D.print(t)}function x(e){switch(e.target.id){case"add-project":P.showPopUp();break;case"add-task":D.showPopUp();break;case"close-project-popup":P.hidePopUp();break;case"close-task-popup":D.hidePopUp();break;case"close-edit-task-popup":D.hideEditPopUp();break;case"button-submit-project":P.push(P.create()),P.hidePopUp();break;case"button-submit-task":D.push(D.create()),D.hidePopUp();break;case"button-edit-task":D.edit(D.createEdit()),D.hideEditPopUp()}switch(e.target.classList[0]){case"remove-task":D.remove(e.target.id);break;case"edit-task":C=e.target.id,D.showEditPopUp();break;case"task-title":const t=e.target.closest(".task-container"),d=t.querySelector("p"),n=t.querySelector("span");d.classList.contains("hidden")&&n.classList.contains("hidden")?(d.classList.remove("hidden"),n.classList.remove("hidden")):(d.classList.add("hidden"),n.classList.add("hidden"));break;case"remove-project":B=e.target.id,P.remove(B)}}P.print(),D.print("Default")})();